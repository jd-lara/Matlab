function f=pfloweqs(x,S)

Vs=S.Bus.Voltages(S.Bus.SlackList);
V=S.Bus.Voltages(S.Bus.PVList);
Pg=real(S.Bus.Generation);
Qg=imag(S.Bus.Generation);
Pl=real(S.Bus.Load);
Ql=imag(S.Bus.Load);

V1=x(1);
d1=x(2);
V2=x(3);
d2=x(4);
% PV bus
Qg3=x(5);
d3=x(6);
V3=V(1);
% PV bus
Qg4=x(7);
d4=x(8);
V4=V(2);
% Slack bus
Pg5=x(9);
Qg5=x(10);
V5=Vs;
d5=0;


f(1)=Pg(1)-Pl(1)-real((V1*cos(d1) + V1*i*sin(d1))*(V1*cos(d1)*(48.077 + 240.38i) - V2*cos(d2)*(19.231 + 96.154i) - V3*cos(d3)*(9.6154 + 48.077i) - V4*cos(d4)*(19.231 + 96.154i) - V1*i*sin(d1)*(48.077 + 240.38i) + V2*i*sin(d2)*(19.231 + 96.154i) + V3*i*sin(d3)*(9.6154 + 48.077i) + V4*i*sin(d4)*(19.231 + 96.154i)));
f(2)=Qg(1)-Ql(1)-imag((V1*cos(d1) + V1*i*sin(d1))*(V1*cos(d1)*(48.077 + 240.38i) - V2*cos(d2)*(19.231 + 96.154i) - V3*cos(d3)*(9.6154 + 48.077i) - V4*cos(d4)*(19.231 + 96.154i) - V1*i*sin(d1)*(48.077 + 240.38i) + V2*i*sin(d2)*(19.231 + 96.154i) + V3*i*sin(d3)*(9.6154 + 48.077i) + V4*i*sin(d4)*(19.231 + 96.154i)));
f(3)=Pg(2)-Pl(2)-real(-1.0*(V2*cos(d2) + V2*i*sin(d2))*(V1*cos(d1)*(19.231 + 96.154i) - V2*cos(d2)*(28.846 + 144.23i) + V5*cos(d5)*(9.6154 + 48.077i) - V1*i*sin(d1)*(19.231 + 96.154i) + V2*i*sin(d2)*(28.846 + 144.23i) - V5*i*sin(d5)*(9.6154 + 48.077i)));
f(4)=Qg(2)-Ql(2)-imag(-1.0*(V2*cos(d2) + V2*i*sin(d2))*(V1*cos(d1)*(19.231 + 96.154i) - V2*cos(d2)*(28.846 + 144.23i) + V5*cos(d5)*(9.6154 + 48.077i) - V1*i*sin(d1)*(19.231 + 96.154i) + V2*i*sin(d2)*(28.846 + 144.23i) - V5*i*sin(d5)*(9.6154 + 48.077i)));
f(5)=Pg(3)-Pl(3)-real(-1.0*(V3*cos(d3) + V3*i*sin(d3))*(V1*cos(d1)*(9.6154 + 48.077i) - V3*cos(d3)*(19.231 + 96.152i) + V4*cos(d4)*(9.6154 + 48.077i) - V1*i*sin(d1)*(9.6154 + 48.077i) + V3*i*sin(d3)*(19.231 + 96.152i) - V4*i*sin(d4)*(9.6154 + 48.077i)));
f(6)=Qg3-Ql(3)-imag(-1.0*(V3*cos(d3) + V3*i*sin(d3))*(V1*cos(d1)*(9.6154 + 48.077i) - V3*cos(d3)*(19.231 + 96.152i) + V4*cos(d4)*(9.6154 + 48.077i) - V1*i*sin(d1)*(9.6154 + 48.077i) + V3*i*sin(d3)*(19.231 + 96.152i) - V4*i*sin(d4)*(9.6154 + 48.077i)));
f(7)=Pg(4)-Pl(4)-real(-1.0*(V4*cos(d4) + V4*i*sin(d4))*(V1*cos(d1)*(19.231 + 96.154i) + V3*cos(d3)*(9.6154 + 48.077i) - V4*cos(d4)*(38.462 + 192.3i) + V5*cos(d5)*(9.6154 + 48.077i) - V1*i*sin(d1)*(19.231 + 96.154i) - V3*i*sin(d3)*(9.6154 + 48.077i) + V4*i*sin(d4)*(38.462 + 192.3i) - V5*i*sin(d5)*(9.6154 + 48.077i)));
f(8)=Qg4-Ql(4)-imag(-1.0*(V4*cos(d4) + V4*i*sin(d4))*(V1*cos(d1)*(19.231 + 96.154i) + V3*cos(d3)*(9.6154 + 48.077i) - V4*cos(d4)*(38.462 + 192.3i) + V5*cos(d5)*(9.6154 + 48.077i) - V1*i*sin(d1)*(19.231 + 96.154i) - V3*i*sin(d3)*(9.6154 + 48.077i) + V4*i*sin(d4)*(38.462 + 192.3i) - V5*i*sin(d5)*(9.6154 + 48.077i)));
f(9)=Pg5-Pl(5)-real(-1.0*(V5*cos(d5) + V5*i*sin(d5))*(V2*cos(d2)*(9.6154 + 48.077i) + V4*cos(d4)*(9.6154 + 48.077i) - V5*cos(d5)*(19.231 + 96.152i) - V2*i*sin(d2)*(9.6154 + 48.077i) - V4*i*sin(d4)*(9.6154 + 48.077i) + V5*i*sin(d5)*(19.231 + 96.152i)));
f(10)=Qg5-Ql(5)-imag(-1.0*(V5*cos(d5) + V5*i*sin(d5))*(V2*cos(d2)*(9.6154 + 48.077i) + V4*cos(d4)*(9.6154 + 48.077i) - V5*cos(d5)*(19.231 + 96.152i) - V2*i*sin(d2)*(9.6154 + 48.077i) - V4*i*sin(d4)*(9.6154 + 48.077i) + V5*i*sin(d5)*(19.231 + 96.152i)));
